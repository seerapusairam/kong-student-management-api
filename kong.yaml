_format_version: "3.0"
services:
- name: student-api-service
  host: app
  protocol: http
  port: 3000
  routes:
  - name: student-routes
    paths:
    - /api/students
    - /api/students/
    strip_path: false
    plugins:
    - name: response-transformer
      config:
        remove:
          headers:
          - X-Powered-By
          json:
          - _id
          - createdBy
          - createdAt
          - updatedAt
          - __v
    - name: custom-plugin
      config:
        token_name: X-Auth-Token
        password: Qweasdzxc@123
    protocols:
    - http
    - https
  - name: user-routes
    paths:
    - /api/user/login
    - /api/user/register
    strip_path: false
    protocols:
    - http
    - https
  plugins:
  - name: http-log
    config:
      http_endpoint: https://webhook.site/a471f0b4-1944-47da-ad99-3c9248b43c1b
      method: POST
      timeout: 10000
  - name: rate-limiting
    config:
      minute: 10
      limit_by: consumer
      fault_tolerant: true